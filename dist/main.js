(()=>{var t={427:t=>{t.exports=()=>{const t={},e={missedShots:[],hits:[],shipsSunk:0};return{board:(()=>{const t=[];for(let e=65;e<=74;e++)for(let r=1;r<=10;r++){let n=[String.fromCharCode(e),r];t.push(n)}return t})(),placeShip:(e,r)=>{if(e.getLength()!==r.length)return"incorrect placement";const n=e.getName();return t[n]=[],t[n][0]=e,t[n][1]=[...r],t},playerShips:t,receiveAttack:r=>{for(const n in t){let o=t[n][1];for(let s=0;s<o.length;s++)if(r.toString()===o[s].toString())return t[n][0].hit(),e.hits.push(r),t[n][0].isSunk()&&e.shipsSunk++,!0}return e.missedShots.push(r),!1},missedShots:()=>e.missedShots,hits:()=>e.hits,allShipsSunk:()=>{const r=Object.keys(t).length;return e.shipsSunk===r}}}},21:t=>{t.exports=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1)+t)}},507:(t,e,r)=>{const n=r(21);t.exports=t=>{let e=!0;const r=[],o=(t,e,r)=>{let n=!1;for(let r=0;r<e.length;r++)if(t.toString()===e[r].toString())return n;for(let e=0;e<r.length;e++)t.toString()===r[e].toString()&&(n=!0);return n},s=t=>{const e=t.length;return t[n(0,e-1)]};return{isTurn:()=>e,changeTurn:()=>{e=!e},makeAttack:(t,n,s)=>e?o(t,r,n)?(r.push(t),s(t)):"invalid coordinates":"not your turn",makeRandomAttack:t=>{if(e){let e=s(t);for(;!o(e,r,t);)e=s(t);return r.push(e),`attack made at ${e}`}return"not your turn"},name:t}}},643:t=>{t.exports=(t,e)=>{let r=0,n=!1;return{getLength:()=>e,getHits:()=>r,getName:()=>t,hit:()=>{r++},isSunk:()=>(n||e!==r||(n=!0),n)}}},281:t=>{t.exports=t=>{const e=document.createElement("div");e.classList.add("player-board");for(let r=0;r<t.length;r++){let n=document.createElement("div");n.textContent=`${t[r].toString()}`,e.appendChild(n)}const r=(t,e,r)=>{t.forEach((t=>{for(let n=0;n<e.length;n++){let o=e[n].textContent.split(",");o.splice(1,1,Number(o[1])),t.toString()===o.toString()&&(e[n].className=r)}}))};return{board:e,renderPlacements:(t,e)=>{for(ship in t){const n=t[ship][1];r(n,e,"placement")}},renderShots:(t,e,n)=>{r(t,n,"hit"),r(e,n,"missed")}}}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,r),s.exports}(()=>{const t=r(643),e=r(427),n=r(507),o=r(281),s=n(),a=e(),i=document.createElement("main"),l=o(a.board);i.appendChild(l.board),document.body.appendChild(i),a.placeShip(t("patrol",2),[["B",3],["B",4]]),a.placeShip(t("submarine",3),[["E",8],["F",8],["G",8]]),a.placeShip(t("destroyer",3),[["C",6],["C",7],["C",8]]),a.placeShip(t("battleship",4),[["C",2],["D",2],["E",2],["F",2]]),a.placeShip(t("carrier",5),[["I",5],["I",6],["I",7],["I",8],["I",9]]);const c=document.querySelectorAll(".player-board div");l.renderPlacements(a.playerShips,c),n().changeTurn();const p=e(),h=o(p.board);h.board.className="cpu-board",i.appendChild(h.board),p.placeShip(t("patrol",2),[["F",9],["G",9]]),p.placeShip(t("submarine",3),[["A",5],["A",6],["A",7]]),p.placeShip(t("destroyer",3),[["D",5],["E",5],["F",5]]),p.placeShip(t("battleship",4),[["H",1],["H",2],["H",3],["H",4]]),p.placeShip(t("carrier",5),[["J",6],["J",7],["J",8],["J",9],["J",10]]);const d=document.querySelectorAll(".cpu-board div");h.renderPlacements(p.playerShips,d),d.forEach((t=>{t.addEventListener("click",(t=>{let e=t.currentTarget.textContent.split(",");e.splice(1,1,Number(e[1])),s.makeAttack(e,p.board,p.receiveAttack),h.renderShots(p.hits(),p.missedShots(),d),console.log(p.missedShots()),console.log(p.hits())}))}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU8wRCxPQUFPLEVBQUcsRUFBR0MsT0FBTzNELEVBQU8sS0FFbEN3RSxFQUFRbkMsV0FBV3JDLEVBQVE4RSxFQUFjakYsTUFBT2lGLEVBQWNsRSxlQUc5RG1FLEVBQWdCakIsWUFBWWdCLEVBQWNuRixPQUFRbUYsRUFBY3BGLGNBQWVzRixHQUUvRUssUUFBUUMsSUFBSVIsRUFBY3BGLGVBQzFCMkYsUUFBUUMsSUFBSVIsRUFBY25GLE9BQU8sR0FDbkMsRyIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZUJvYXJkLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaGVscGVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvcGxheWVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvc2hpcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3VpLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9nYW1lTG9vcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLy8gZ2FtZWJvYXJkIGZhY3RvcnlcclxuXHJcbmNvbnN0IGdhbWVCb2FyZCA9ICgpID0+IHtcclxuXHJcbiAgICBjb25zdCBwbGF5ZXJTaGlwcyA9IHt9O1xyXG5cclxuICAgIGNvbnN0IGJvYXJkU3RhdHVzID0ge1xyXG4gICAgICAgIG1pc3NlZFNob3RzOiBbXSxcclxuICAgICAgICBoaXRzOiBbXSxcclxuICAgICAgICBzaGlwc1N1bms6IDAsXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGNyZWF0ZSBncmlkXHJcbiAgICBjb25zdCBjcmVhdGVCb2FyZCA9ICgpID0+IHtcclxuXHJcbiAgICAgICAgY29uc3QgYm9hcmQgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDY1OyBpIDw9IDc0OyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPD0gMTA7IGorKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvb3JkcyA9IFtTdHJpbmcuZnJvbUNoYXJDb2RlKGkpLCBqXTtcclxuICAgICAgICAgICAgICAgIGJvYXJkLnB1c2goY29vcmRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYm9hcmQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYm9hcmQgPSBjcmVhdGVCb2FyZCgpO1xyXG5cclxuICAgIC8vIGNoZWNrIGlmIGFsbCBzaGlwcyBoYXZlIGJlZW4gc3Vua1xyXG4gICAgY29uc3QgYWxsU2hpcHNTdW5rID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG51bWJlck9mU2hpcHMgPSBPYmplY3Qua2V5cyhwbGF5ZXJTaGlwcykubGVuZ3RoO1xyXG4gICAgICAgIGlmIChib2FyZFN0YXR1cy5zaGlwc1N1bmsgPT09IG51bWJlck9mU2hpcHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZ2V0IG1pc3NlZCBzaG90c1xyXG4gICAgY29uc3QgbWlzc2VkU2hvdHMgPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJvYXJkU3RhdHVzLm1pc3NlZFNob3RzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGdldCBoaXRzXHJcbiAgICBjb25zdCBoaXRzID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBib2FyZFN0YXR1cy5oaXRzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHBsYWNlc2hpcCBtZXRob2RcclxuICAgIGNvbnN0IHBsYWNlU2hpcCA9IChzaGlwLCBwbGFjZW1lbnQpID0+IHtcclxuICAgICAgICAvLyBjaGVjayB0aGF0IHNoaXAgbGVuZ3RoID09IGNvb3JkcyBsZW5ndGhcclxuICAgICAgICBpZiAoc2hpcC5nZXRMZW5ndGgoKSAhPT0gcGxhY2VtZW50Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2luY29ycmVjdCBwbGFjZW1lbnQnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY2hlY2sgdGhhdCBjb29yZHMgYXJlIHZhbGlkKGFkamFjZW50IGFuZCBub3Qgb2NjdXBpZWQpXHJcblxyXG4gICAgICAgIC8vIGFkZCBzaGlwIHRvIHBsYXllciBzaGlwc1xyXG4gICAgICAgIGNvbnN0IG5hbWUgPSBzaGlwLmdldE5hbWUoKTtcclxuICAgICAgICBwbGF5ZXJTaGlwc1tuYW1lXSA9IFtdO1xyXG4gICAgICAgIHBsYXllclNoaXBzW25hbWVdWzBdID0gc2hpcDtcclxuICAgICAgICBwbGF5ZXJTaGlwc1tuYW1lXVsxXSA9IFsuLi5wbGFjZW1lbnRdO1xyXG5cclxuICAgICAgICByZXR1cm4gcGxheWVyU2hpcHM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmVjZWl2ZSBhdHRhY2sgbWV0aG9kXHJcbiAgICBjb25zdCByZWNlaXZlQXR0YWNrID0gKGNvb3JkcykgPT4ge1xyXG4gICAgICAgIC8vIGNoZWNrIGlmIGNvb3JkcyBhcmUgdmFsaWQgICA/XHJcbiAgICAgICAgLy8gY2hlY2sgYm9hcmQgYW5kIG1pc3NlZCBzaG90c1xyXG4gICAgICAgIC8vIHNlYXJjaCBwbGF5ZXIgcGxhY2VtZW50cyBmb3IgY29vcmRzXHJcbiAgICAgICAgZm9yIChjb25zdCBzaGlwIGluIHBsYXllclNoaXBzKSB7XHJcbiAgICAgICAgICAgIGxldCBwbGFjZW1lbnRzQXJyID0gcGxheWVyU2hpcHNbc2hpcF1bMV07XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGxhY2VtZW50c0Fyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgKGZvdW5kKSByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgaWYgKGNvb3Jkcy50b1N0cmluZygpID09PSBwbGFjZW1lbnRzQXJyW2ldLnRvU3RyaW5nKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgaGl0IHRvIHNoaXBcclxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXJTaGlwc1tzaGlwXVswXS5oaXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdG8gcmVjb3JkZWQgc2hvdHM7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9hcmRTdGF0dXMuaGl0cy5wdXNoKGNvb3Jkcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgc2hpcCBpcyBzdW5rXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllclNoaXBzW3NoaXBdWzBdLmlzU3VuaygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvYXJkU3RhdHVzLnNoaXBzU3VuaysrO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIGFsbCBzaGlwcyBoYXZlIGJlZW4gc3VuayAqXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBpZiAoIWZvdW5kKSBhZGQgdG8gbWlzc2VkIHNob3RzIGFuZCByZXR1cm4gZmFsc2VcclxuICAgICAgICBib2FyZFN0YXR1cy5taXNzZWRTaG90cy5wdXNoKGNvb3Jkcyk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZXR1cm4geyBib2FyZCwgcGxhY2VTaGlwLCBwbGF5ZXJTaGlwcywgcmVjZWl2ZUF0dGFjaywgbWlzc2VkU2hvdHMsIGhpdHMsIGFsbFNoaXBzU3VuayB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGdhbWVCb2FyZDsiLCIvLyBnZXQgcmFuZG9tIG51bSBpbmNsdXNpdmUgbWluIGFuZCBtYXhcclxuZnVuY3Rpb24gZ2V0UmFuZG9tSW50SW5jbHVzaXZlKG1pbiwgbWF4KSB7XHJcbiAgICBtaW4gPSBNYXRoLmNlaWwobWluKTtcclxuICAgIG1heCA9IE1hdGguZmxvb3IobWF4KTtcclxuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkgKyBtaW4pO1xyXG59XHJcblxyXG4vLyBmdW5jdGlvbiBjb21wYXJlQXJyYXlzKGFycjEsIGFycjIpIHtcclxuLy8gICAgIGlmIChhcnIxLnRvU3RyaW5nKCkgPT09IGFycjIudG9TdHJpbmcoKSkge1xyXG4vLyAgICAgICAgIHJldHVybiB0cnVlO1xyXG4vLyAgICAgfVxyXG4vLyAgICAgcmV0dXJuIGZhbHNlXHJcbi8vIH1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZ2V0UmFuZG9tSW50SW5jbHVzaXZlO1xyXG4iLCJjb25zdCBnZXRSYW5kb21JbnRJbmNsdXNpdmUgPSByZXF1aXJlKFwiLi4vc3JjL2hlbHBlclwiKVxyXG5cclxuLy8gY3JlYXRlIGEgcGxheWVyXHJcbmNvbnN0IHBsYXllciA9IChuYW1lKSA9PiB7XHJcblxyXG4gICAgbGV0IG15VHVybiA9IHRydWU7XHJcblxyXG4gICAgY29uc3QgYXR0YWNrc01hZGUgPSBbXTtcclxuXHJcbiAgICBjb25zdCBpc1R1cm4gPSAoKSA9PiB7IHJldHVybiBteVR1cm4gfTtcclxuXHJcbiAgICBjb25zdCBjaGFuZ2VUdXJuID0gKCkgPT4ge1xyXG4gICAgICAgIGlmIChteVR1cm4pIHtcclxuICAgICAgICAgICAgbXlUdXJuID0gZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG15VHVybiA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBjaGVjayBpZiBhIG1vdmUgaXMgdmFsaWRcclxuICAgIGNvbnN0IGlzdmFsaWRNb3ZlID0gKGNvb3JkcywgYXR0YWNrc01hZGUsIGJvYXJkKSA9PiB7XHJcblxyXG4gICAgICAgIGxldCB2YWxpZCA9IGZhbHNlXHJcbiAgICAgICAgLy8gY2hlY2sgY29vcmRzIGFuZCBhcnJheSBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF0dGFja3NNYWRlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbXBhcmUgYm9hcmRbaV0gd2l0aCBjb29yZHNcclxuICAgICAgICAgICAgaWYgKGNvb3Jkcy50b1N0cmluZygpID09PSBhdHRhY2tzTWFkZVtpXS50b1N0cmluZygpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNoZWNrIGNvb3JkcyBpbiBib2FyZFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9hcmQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgLy8gY29tcGFyZSBib2FyZFtpXSB3aXRoIGNvb3Jkc1xyXG4gICAgICAgICAgICBpZiAoY29vcmRzLnRvU3RyaW5nKCkgPT09IGJvYXJkW2ldLnRvU3RyaW5nKCkpIHtcclxuICAgICAgICAgICAgICAgIHZhbGlkID0gdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdmFsaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZW50ZXIgY29vcmRpbmF0ZXMgdG8gYXR0YWNrIG9uIGVuZW15IGJvYXJkXHJcbiAgICBjb25zdCBtYWtlQXR0YWNrID0gKGNvb3JkcywgZW5lbXlCb2FyZCwgcmVjZWl2ZUF0dGFjaykgPT4ge1xyXG4gICAgICAgIC8vIGNoZWNrIGNvcnJlY3QgdHVyblxyXG4gICAgICAgIGlmIChteVR1cm4pIHtcclxuICAgICAgICAgICAgLy8gc2VlIGlmIGNvb3JkcyBhcmUgdmFsaWRcclxuICAgICAgICAgICAgaWYgKGlzdmFsaWRNb3ZlKGNvb3JkcywgYXR0YWNrc01hZGUsIGVuZW15Qm9hcmQpKSB7XHJcbiAgICAgICAgICAgICAgICBhdHRhY2tzTWFkZS5wdXNoKGNvb3Jkcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlY2VpdmVBdHRhY2soY29vcmRzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2ludmFsaWQgY29vcmRpbmF0ZXMnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuICdub3QgeW91ciB0dXJuJztcclxuICAgIH1cclxuXHJcbiAgICAvLyBnZXQgcmFuZG9tIGNvb3JkcyBnaXZlbiBhIGJvYXJkXHJcbiAgICBjb25zdCBnZXRSYW5kb21Db29yZHMgPSAoZW5lbXlCb2FyZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGJvYXJkTGVuZ3RoID0gZW5lbXlCb2FyZC5sZW5ndGg7XHJcbiAgICAgICAgY29uc3QgcmFuZG9tTnVtID0gZ2V0UmFuZG9tSW50SW5jbHVzaXZlKDAsIGJvYXJkTGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgY29uc3QgcmFuZG9tQ29vcmRzID0gZW5lbXlCb2FyZFtyYW5kb21OdW1dO1xyXG5cclxuICAgICAgICByZXR1cm4gcmFuZG9tQ29vcmRzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIG1ha2UgYSB2YWxpZCByYW5kb20gYXR0YWNrXHJcbiAgICBjb25zdCBtYWtlUmFuZG9tQXR0YWNrID0gKGVuZW15Qm9hcmQpID0+IHtcclxuXHJcbiAgICAgICAgaWYgKG15VHVybikge1xyXG4gICAgICAgICAgICAvLyBnZXQgcmFuZG9tIGNvb3Jkc1xyXG4gICAgICAgICAgICBsZXQgcmFuZG9tQ29vcmRzID0gZ2V0UmFuZG9tQ29vcmRzKGVuZW15Qm9hcmQpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKCFpc3ZhbGlkTW92ZShyYW5kb21Db29yZHMsIGF0dGFja3NNYWRlLCBlbmVteUJvYXJkKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gZ2V0IG5ldyBjb29yZHMgd2hpbGUgaW52YWxpZFxyXG4gICAgICAgICAgICAgICAgcmFuZG9tQ29vcmRzID0gZ2V0UmFuZG9tQ29vcmRzKGVuZW15Qm9hcmQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBtYWtlIGF0dGFja1xyXG4gICAgICAgICAgICAvLyBlbmVteUJvYXJkLnJlY2VpdmVBdHRhY2socmFuZG9tQ29vcmRzKTtcclxuICAgICAgICAgICAgYXR0YWNrc01hZGUucHVzaChyYW5kb21Db29yZHMpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGBhdHRhY2sgbWFkZSBhdCAke3JhbmRvbUNvb3Jkc31gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuICdub3QgeW91ciB0dXJuJztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBpc1R1cm4sIGNoYW5nZVR1cm4sIG1ha2VBdHRhY2ssIG1ha2VSYW5kb21BdHRhY2ssIG5hbWUgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBwbGF5ZXI7IiwiLy8gc2hpcCBmYWN0b3J5IGZ1bmN0aW9uXHJcbmNvbnN0IHNoaXAgPSAobmFtZSwgbGVuZ3RoKSA9PiB7XHJcblxyXG4gICAgbGV0IGhpdHMgPSAwO1xyXG4gICAgbGV0IGJlZW5TdW5rID0gZmFsc2U7XHJcblxyXG4gICAgY29uc3QgZ2V0SGl0cyA9ICgpID0+IGhpdHM7XHJcbiAgICBjb25zdCBnZXRMZW5ndGggPSAoKSA9PiBsZW5ndGg7XHJcbiAgICBjb25zdCBnZXROYW1lID0gKCkgPT4gbmFtZTtcclxuXHJcbiAgICBjb25zdCBoaXQgPSAoKSA9PiB7XHJcbiAgICAgICAgaGl0cysrO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGlzU3VuayA9ICgpID0+IHtcclxuICAgICAgICBpZiAoIWJlZW5TdW5rICYmIGxlbmd0aCA9PT0gaGl0cykge1xyXG4gICAgICAgICAgICBiZWVuU3VuayA9IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJlZW5TdW5rO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IGdldExlbmd0aCwgZ2V0SGl0cywgZ2V0TmFtZSwgaGl0LCBpc1N1bmsgfVxyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBzaGlwOyIsIi8vIGRvbSBtb2R1bGVcclxuLy8gMS4gZGlzcGxheSBib3RoIHBsYXllcnMgYm9hcmRzIHJlbmRlciB0aGVtIHVzaW5nIGluZm8gZnJvbSBnYW1lYm9hcmQgY2xhc3MvZmFjdG9yeVxyXG4vLyAyLiBsZXQgdXNlciBjbGljayBvbiBjb29yZCBpbiBlbmVteSBib2FyZFxyXG5cclxuY29uc3QgcmVuZGVyR2FtZUJvYXJkID0gKGdhbWVCb2FyZCkgPT4ge1xyXG5cclxuICAgIC8vIHJlbmRlciBib2FyZFxyXG4gICAgY29uc3QgYm9hcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgYm9hcmQuY2xhc3NMaXN0LmFkZChcInBsYXllci1ib2FyZFwiKTtcclxuXHJcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGdhbWVCb2FyZC5sZW5ndGg7IGorKykge1xyXG4gICAgICAgIC8vIGNyZWF0ZSBibG9ja1xyXG4gICAgICAgIGxldCBjb29yZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgY29vcmQudGV4dENvbnRlbnQgPSBgJHtnYW1lQm9hcmRbal0udG9TdHJpbmcoKX1gO1xyXG4gICAgICAgIGJvYXJkLmFwcGVuZENoaWxkKGNvb3JkKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBmdW5jdGlvbiB0byBzdHlsZSBjb29yZHMgZGVwZW5kaW5nIG9uIHN0YXR1c1xyXG4gICAgY29uc3Qgc3R5bGVDb29yZHMgPSAodHlwZUFyciwgY29vcmRzQXJyLCBzdHlsZSkgPT4ge1xyXG4gICAgICAgIC8vIGxvb3Agb3ZlciB0eXBlIGFycmF5XHJcbiAgICAgICAgdHlwZUFyci5mb3JFYWNoKHR5cGUgPT4ge1xyXG4gICAgICAgICAgICAvLyBsb29wIG92ZXIgY29vcmRzQXJyXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29vcmRzQXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGlzcGxheUNvb3JkcyA9IGNvb3Jkc0FycltpXS50ZXh0Q29udGVudC5zcGxpdChcIixcIik7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5Q29vcmRzLnNwbGljZSgxLCAxLCBOdW1iZXIoZGlzcGxheUNvb3Jkc1sxXSkpO1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgdHJ1ZSBhZGQgc3R5bGVcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlLnRvU3RyaW5nKCkgPT09IGRpc3BsYXlDb29yZHMudG9TdHJpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvb3Jkc0FycltpXS5jbGFzc05hbWUgPSBzdHlsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvLyByZW5kZXIgcGxhY2VtZW50IG9mIHNoaXBzIFxyXG4gICAgY29uc3QgcmVuZGVyUGxhY2VtZW50cyA9IChwbGF5ZXJTaGlwcywgY29vcmRzQXJyKSA9PiB7XHJcbiAgICAgICAgLy8gY2hhbmdlIGJhY2tncm91bmRDb2xvciBvZiBjb29yZHNcclxuICAgICAgICBmb3IgKHNoaXAgaW4gcGxheWVyU2hpcHMpIHtcclxuICAgICAgICAgICAgY29uc3QgcGxhY2VtZW50c0FyciA9IHBsYXllclNoaXBzW3NoaXBdWzFdO1xyXG5cclxuICAgICAgICAgICAgc3R5bGVDb29yZHMocGxhY2VtZW50c0FyciwgY29vcmRzQXJyLCBcInBsYWNlbWVudFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdXBkYXRlIHVpIGFmdGVyIGVuZW15IGhhcyBtYWRlIGF0dGFja1xyXG4gICAgY29uc3QgcmVuZGVyU2hvdHMgPSAoaGl0cywgbWlzc2VzLCBjb29yZHNBcnIpID0+IHtcclxuXHJcbiAgICAgICAgc3R5bGVDb29yZHMoaGl0cywgY29vcmRzQXJyLCBcImhpdFwiKTtcclxuICAgICAgICBzdHlsZUNvb3JkcyhtaXNzZXMsIGNvb3Jkc0FyciwgXCJtaXNzZWRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmVuZGVyIGF0dGFja3NcclxuXHJcbiAgICByZXR1cm4geyBib2FyZCwgcmVuZGVyUGxhY2VtZW50cywgcmVuZGVyU2hvdHMgfTtcclxufVxyXG5cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJlbmRlckdhbWVCb2FyZDsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiY29uc3Qgc2hpcCA9IHJlcXVpcmUoXCIuL3NoaXBcIik7XHJcbmNvbnN0IGdhbWVCb2FyZCA9IHJlcXVpcmUoXCIuL2dhbWVCb2FyZFwiKTtcclxuY29uc3QgcGxheWVyID0gcmVxdWlyZShcIi4vcGxheWVyXCIpO1xyXG5jb25zdCByZW5kZXJHYW1lQm9hcmQgPSByZXF1aXJlKFwiLi91aVwiKTtcclxuXHJcbi8vIG1haW4gZ2FtZWxvb3BcclxuLy8gMS4gc2V0dXAgcGxheWVycyBhbmQgZ2FtZWJvYXJkcyB3aXRoIHByZWRldGVybWluZWQgY29vcmRzXHJcbi8vIDIuIHN0ZXBzIHRocm91Z2ggZ2FtZSB0dXJuIGJ5IHR1cm4gdXNpbmcgb25seSBtZXRob2RzIGZyb20gb3RoZXIgb2JqZWN0c1xyXG5cclxuLy8gY3JlYXRlIHBsYXllciBcclxuY29uc3QgcGxheWVyMSA9IHBsYXllcigpO1xyXG5cclxuLy8gY3JlYXRlIGdhbWVib2FyZFxyXG5jb25zdCBwbGF5ZXIxX2dhbWVCb2FyZCA9IGdhbWVCb2FyZCgpO1xyXG5cclxuLy8gcmVuZGVyIGdhbWVib2FyZFxyXG5jb25zdCBtYWluQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJtYWluXCIpO1xyXG5jb25zdCBkaXNwbGF5Qm9hcmQgPSByZW5kZXJHYW1lQm9hcmQocGxheWVyMV9nYW1lQm9hcmQuYm9hcmQpO1xyXG5cclxubWFpbkNvbnRlbnQuYXBwZW5kQ2hpbGQoZGlzcGxheUJvYXJkLmJvYXJkKTtcclxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtYWluQ29udGVudCk7XHJcblxyXG4vLyBwbGFjZXNoaXBcclxuXHJcbnBsYXllcjFfZ2FtZUJvYXJkLnBsYWNlU2hpcChzaGlwKFwicGF0cm9sXCIsIDIpLCBbW1wiQlwiLCAzXSwgW1wiQlwiLCA0XV0pO1xyXG5wbGF5ZXIxX2dhbWVCb2FyZC5wbGFjZVNoaXAoc2hpcChcInN1Ym1hcmluZVwiLCAzKSwgW1tcIkVcIiwgOF0sIFtcIkZcIiwgOF0sIFtcIkdcIiwgOF1dKVxyXG5wbGF5ZXIxX2dhbWVCb2FyZC5wbGFjZVNoaXAoc2hpcChcImRlc3Ryb3llclwiLCAzKSwgW1tcIkNcIiwgNl0sIFtcIkNcIiwgN10sIFtcIkNcIiwgOF1dKTtcclxucGxheWVyMV9nYW1lQm9hcmQucGxhY2VTaGlwKHNoaXAoXCJiYXR0bGVzaGlwXCIsIDQpLCBbW1wiQ1wiLCAyXSwgW1wiRFwiLCAyXSwgW1wiRVwiLCAyXSwgW1wiRlwiLCAyXV0pO1xyXG5wbGF5ZXIxX2dhbWVCb2FyZC5wbGFjZVNoaXAoc2hpcChcImNhcnJpZXJcIiwgNSksIFtbXCJJXCIsIDVdLCBbXCJJXCIsIDZdLCBbXCJJXCIsIDddLCBbXCJJXCIsIDhdLCBbXCJJXCIsIDldXSk7XHJcblxyXG5jb25zdCBjb29yZHNBcnIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBsYXllci1ib2FyZCBkaXZcIik7XHJcbmRpc3BsYXlCb2FyZC5yZW5kZXJQbGFjZW1lbnRzKHBsYXllcjFfZ2FtZUJvYXJkLnBsYXllclNoaXBzLCBjb29yZHNBcnIpO1xyXG5cclxuLy8gY3JlYXRlIGNwdSBwbGF5ZXJcclxuY29uc3QgcGxheWVyQ3B1ID0gcGxheWVyKCk7XHJcblxyXG4vLyBjaGFuZ2UgY3B1IHBsYXllciB0dXJuXHJcbnBsYXllckNwdS5jaGFuZ2VUdXJuKCk7XHJcblxyXG4vLyBjcHUgYm9hcmRcclxuY29uc3QgY3B1X2dhbWVCb2FyZCA9IGdhbWVCb2FyZCgpO1xyXG5cclxuY29uc3QgZGlzcGxheUNwdUJvYXJkID0gcmVuZGVyR2FtZUJvYXJkKGNwdV9nYW1lQm9hcmQuYm9hcmQpO1xyXG5kaXNwbGF5Q3B1Qm9hcmQuYm9hcmQuY2xhc3NOYW1lID0gXCJjcHUtYm9hcmRcIjtcclxubWFpbkNvbnRlbnQuYXBwZW5kQ2hpbGQoZGlzcGxheUNwdUJvYXJkLmJvYXJkKTtcclxuXHJcbmNwdV9nYW1lQm9hcmQucGxhY2VTaGlwKHNoaXAoXCJwYXRyb2xcIiwgMiksIFtbXCJGXCIsIDldLCBbXCJHXCIsIDldXSk7XHJcbmNwdV9nYW1lQm9hcmQucGxhY2VTaGlwKHNoaXAoXCJzdWJtYXJpbmVcIiwgMyksIFtbXCJBXCIsIDVdLCBbXCJBXCIsIDZdLCBbXCJBXCIsIDddXSlcclxuY3B1X2dhbWVCb2FyZC5wbGFjZVNoaXAoc2hpcChcImRlc3Ryb3llclwiLCAzKSwgW1tcIkRcIiwgNV0sIFtcIkVcIiwgNV0sIFtcIkZcIiwgNV1dKTtcclxuY3B1X2dhbWVCb2FyZC5wbGFjZVNoaXAoc2hpcChcImJhdHRsZXNoaXBcIiwgNCksIFtbXCJIXCIsIDFdLCBbXCJIXCIsIDJdLCBbXCJIXCIsIDNdLCBbXCJIXCIsIDRdXSk7XHJcbmNwdV9nYW1lQm9hcmQucGxhY2VTaGlwKHNoaXAoXCJjYXJyaWVyXCIsIDUpLCBbW1wiSlwiLCA2XSwgW1wiSlwiLCA3XSwgW1wiSlwiLCA4XSwgW1wiSlwiLCA5XSwgW1wiSlwiLCAxMF1dKTtcclxuXHJcbmNvbnN0IGNwdUNvb3JkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY3B1LWJvYXJkIGRpdlwiKTtcclxuZGlzcGxheUNwdUJvYXJkLnJlbmRlclBsYWNlbWVudHMoY3B1X2dhbWVCb2FyZC5wbGF5ZXJTaGlwcywgY3B1Q29vcmRzKTtcclxuXHJcbi8vIG1hbmFnZSB0dXJuXHJcblxyXG5cclxuLy8gcGxheWVyIHdpdGggY3VycmVudCB0dXJuIG1ha2VzIGF0dGFja1xyXG5cclxuXHJcbi8vIGFkZCBldmVudGxpc3RlbmVyIGlmIHBsYXllciAxIHR1cm4gKGNsaWNrIGF0dGFjaylcclxuY3B1Q29vcmRzLmZvckVhY2goZGl2ID0+IHtcclxuICAgIGRpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgLy8gZ2V0IGF0dGFjayBjb29yZHNcclxuICAgICAgICBsZXQgZ2V0Q29vcmRzID0gZS5jdXJyZW50VGFyZ2V0LnRleHRDb250ZW50O1xyXG4gICAgICAgIGxldCBjb29yZHMgPSBnZXRDb29yZHMuc3BsaXQoJywnKTtcclxuICAgICAgICBjb29yZHMuc3BsaWNlKDEsIDEsIE51bWJlcihjb29yZHNbMV0pKTtcclxuICAgICAgICAvLyBydW4gbWFrZSBhdHRhY2sgZnVuY3Rpb25cclxuICAgICAgICBwbGF5ZXIxLm1ha2VBdHRhY2soY29vcmRzLCBjcHVfZ2FtZUJvYXJkLmJvYXJkLCBjcHVfZ2FtZUJvYXJkLnJlY2VpdmVBdHRhY2spO1xyXG5cclxuICAgICAgICAvLyB1cGRhdGUgdWlcclxuICAgICAgICBkaXNwbGF5Q3B1Qm9hcmQucmVuZGVyU2hvdHMoY3B1X2dhbWVCb2FyZC5oaXRzKCksIGNwdV9nYW1lQm9hcmQubWlzc2VkU2hvdHMoKSwgY3B1Q29vcmRzKTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coY3B1X2dhbWVCb2FyZC5taXNzZWRTaG90cygpKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhjcHVfZ2FtZUJvYXJkLmhpdHMoKSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vLyBwbGF5ZXIxLm1ha2VSYW5kb21BdHRhY2soY3B1X2dhbWVCb2FyZC5ib2FyZCk7XHJcblxyXG5cclxuLy8gcmVjZWl2ZSBhdHRhY2sgb24gZW5lbXkgYm9hcmRcclxuXHJcblxyXG4vLyByZXBvcnQgbWlzcywgaGl0LCBzaGlwc3Vua1xyXG5cclxuXHJcbi8vIHVwZGF0ZSB1aVxyXG5cclxuXHJcbi8vIGNoZWNrIGlmIGdhbWVvdmVyXHJcblxyXG5cclxuLy8gY2hhbmdlIHR1cm5cclxuXHJcbiJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwicGxheWVyU2hpcHMiLCJib2FyZFN0YXR1cyIsIm1pc3NlZFNob3RzIiwiaGl0cyIsInNoaXBzU3VuayIsImJvYXJkIiwiaSIsImoiLCJjb29yZHMiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJwdXNoIiwiY3JlYXRlQm9hcmQiLCJwbGFjZVNoaXAiLCJzaGlwIiwicGxhY2VtZW50IiwiZ2V0TGVuZ3RoIiwibGVuZ3RoIiwibmFtZSIsImdldE5hbWUiLCJyZWNlaXZlQXR0YWNrIiwicGxhY2VtZW50c0FyciIsInRvU3RyaW5nIiwiaGl0IiwiaXNTdW5rIiwiYWxsU2hpcHNTdW5rIiwibnVtYmVyT2ZTaGlwcyIsIk9iamVjdCIsImtleXMiLCJtaW4iLCJtYXgiLCJNYXRoIiwiY2VpbCIsImZsb29yIiwicmFuZG9tIiwiZ2V0UmFuZG9tSW50SW5jbHVzaXZlIiwibXlUdXJuIiwiYXR0YWNrc01hZGUiLCJpc3ZhbGlkTW92ZSIsInZhbGlkIiwiZ2V0UmFuZG9tQ29vcmRzIiwiZW5lbXlCb2FyZCIsImJvYXJkTGVuZ3RoIiwiaXNUdXJuIiwiY2hhbmdlVHVybiIsIm1ha2VBdHRhY2siLCJtYWtlUmFuZG9tQXR0YWNrIiwicmFuZG9tQ29vcmRzIiwiYmVlblN1bmsiLCJnZXRIaXRzIiwiZ2FtZUJvYXJkIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiY29vcmQiLCJ0ZXh0Q29udGVudCIsImFwcGVuZENoaWxkIiwic3R5bGVDb29yZHMiLCJ0eXBlQXJyIiwiY29vcmRzQXJyIiwic3R5bGUiLCJmb3JFYWNoIiwidHlwZSIsImRpc3BsYXlDb29yZHMiLCJzcGxpdCIsInNwbGljZSIsIk51bWJlciIsImNsYXNzTmFtZSIsInJlbmRlclBsYWNlbWVudHMiLCJyZW5kZXJTaG90cyIsIm1pc3NlcyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJwbGF5ZXIiLCJyZW5kZXJHYW1lQm9hcmQiLCJwbGF5ZXIxIiwicGxheWVyMV9nYW1lQm9hcmQiLCJtYWluQ29udGVudCIsImRpc3BsYXlCb2FyZCIsImJvZHkiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY3B1X2dhbWVCb2FyZCIsImRpc3BsYXlDcHVCb2FyZCIsImNwdUNvb3JkcyIsImRpdiIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY3VycmVudFRhcmdldCIsImNvbnNvbGUiLCJsb2ciXSwic291cmNlUm9vdCI6IiJ9