(()=>{var t={427:t=>{t.exports=()=>{const t={},e={missedShots:[],hits:[],shipsSunk:0};return{board:(()=>{const t=[];for(let e=65;e<=74;e++)for(let r=1;r<=10;r++){let n=[String.fromCharCode(e),r];t.push(n)}return t})(),placeShip:(e,r)=>{if(e.getLength()!==r.length)return"incorrect placement";const n=e.getName();return t[n]=[],t[n][0]=e,t[n][1]=[...r],t},playerShips:t,receiveAttack:r=>{for(const n in t){let o=t[n][1];for(let a=0;a<o.length;a++)if(r.toString()===o[a].toString())return t[n][0].hit(),e.hits.push(r),t[n][0].isSunk()&&e.shipsSunk++,!0}return e.missedShots.push(r),!1},missedShots:()=>e.missedShots,hits:()=>e.hits,allShipsSunk:()=>{const r=Object.keys(t).length;return e.shipsSunk===r}}}},21:t=>{t.exports=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1)+t)}},507:(t,e,r)=>{const n=r(21);t.exports=t=>{let e=!0;const r=[],o=(t,e,r)=>{let n=!1;for(let r=0;r<e.length;r++)if(t.toString()===e[r].toString())return n;for(let e=0;e<r.length;e++)t.toString()===r[e].toString()&&(n=!0);return n},a=t=>{const e=t.length;return t[n(0,e-1)]};return{isTurn:()=>e,changeTurn:()=>{e=!e},makeAttack:(t,n,a)=>e?o(t,r,n)?(r.push(t),a(t),`attack made at ${t}`):"invalid coordinates":"not your turn",makeRandomAttack:t=>{if(e){let e=a(t);for(;!o(e,r,t);)e=a(t);return r.push(e),`attack made at ${e}`}return"not your turn"},name:t}}},643:t=>{t.exports=(t,e)=>{let r=0,n=!1;return{getLength:()=>e,getHits:()=>r,getName:()=>t,hit:()=>{r++},isSunk:()=>(n||e!==r||(n=!0),n)}}},281:t=>{t.exports=t=>{const e=document.createElement("div");e.classList.add("player-board");for(let r=0;r<t.length;r++){let n=document.createElement("div");n.textContent=`${t[r].toString()}`,e.appendChild(n)}return{board:e,renderPlacements:(t,e)=>{for(ship in t){const r=t[ship][1];for(let t=0;t<r.length;t++)for(let n=0;n<e.length;n++){let o=e[n].textContent.split(",");o.splice(1,1,Number(o[1])),r[t].toString()===o.toString()&&e[n].classList.add("placement")}}}}}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,r),a.exports}(()=>{const t=r(643),e=r(427),n=r(507),o=r(281),a=n(),s=e(),i=document.createElement("main"),l=o(s.board);i.appendChild(l.board),document.body.appendChild(i),s.placeShip(t("patrol",2),[["B",3],["B",4]]),s.placeShip(t("submarine",3),[["E",8],["F",8],["G",8]]),s.placeShip(t("destroyer",3),[["C",6],["C",7],["C",8]]),s.placeShip(t("battleship",4),[["C",2],["D",2],["E",2],["F",2]]),s.placeShip(t("carrier",5),[["I",5],["I",6],["I",7],["I",8],["I",9]]);const c=document.querySelectorAll(".player-board div");l.renderPlacements(s.playerShips,c),n().changeTurn();const p=e(),h=o(p.board);h.board.className="cpu-board",i.appendChild(h.board),p.placeShip(t("patrol",2),[["F",9],["G",9]]),p.placeShip(t("submarine",3),[["A",5],["A",6],["A",7]]),p.placeShip(t("destroyer",3),[["D",5],["E",5],["F",5]]),p.placeShip(t("battleship",4),[["H",1],["H",2],["H",3],["H",4]]),p.placeShip(t("carrier",5),[["J",6],["J",7],["J",8],["J",9],["J",10]]);const d=document.querySelectorAll(".cpu-board div");h.renderPlacements(p.playerShips,d),d.forEach((t=>{t.addEventListener("click",(t=>{console.log(t.currentTarget.textContent);let e=t.currentTarget.textContent.split(",");e.splice(1,1,Number(e[1])),console.log(e),a.makeAttack(e,p.board,p.receiveAttack),console.log(p.missedShots()),console.log(p.hits())}))}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoicUJBc0dBQSxFQUFPQyxRQW5HVyxLQUVkLE1BQU1DLEVBQWMsQ0FBQyxFQUVmQyxFQUFjLENBQ2hCQyxZQUFhLEdBQ2JDLEtBQU0sR0FDTkMsVUFBVyxHQXlGZixNQUFPLENBQUVDLE1BckZXLE1BRWhCLE1BQU1BLEVBQVEsR0FFZCxJQUFLLElBQUlDLEVBQUksR0FBSUEsR0FBSyxHQUFJQSxJQUN0QixJQUFLLElBQUlDLEVBQUksRUFBR0EsR0FBSyxHQUFJQSxJQUFLLENBQzFCLElBQUlDLEVBQVMsQ0FBQ0MsT0FBT0MsYUFBYUosR0FBSUMsR0FDdENGLEVBQU1NLEtBQUtILEVBQ2YsQ0FFSixPQUFPSCxDQUFLLEVBR0ZPLEdBd0VFQyxVQWpERSxDQUFDQyxFQUFNQyxLQUVyQixHQUFJRCxFQUFLRSxjQUFnQkQsRUFBVUUsT0FDL0IsTUFBTyxzQkFNWCxNQUFNQyxFQUFPSixFQUFLSyxVQUtsQixPQUpBbkIsRUFBWWtCLEdBQVEsR0FDcEJsQixFQUFZa0IsR0FBTSxHQUFLSixFQUN2QmQsRUFBWWtCLEdBQU0sR0FBSyxJQUFJSCxHQUVwQmYsQ0FBVyxFQW1DS0EsY0FBYW9CLGNBL0JqQlosSUFJbkIsSUFBSyxNQUFNTSxLQUFRZCxFQUFhLENBQzVCLElBQUlxQixFQUFnQnJCLEVBQVljLEdBQU0sR0FDdEMsSUFBSyxJQUFJUixFQUFJLEVBQUdBLEVBQUllLEVBQWNKLE9BQVFYLElBRXRDLEdBQUlFLEVBQU9jLGFBQWVELEVBQWNmLEdBQUdnQixXQVl2QyxPQVZBdEIsRUFBWWMsR0FBTSxHQUFHUyxNQUVyQnRCLEVBQVlFLEtBQUtRLEtBQUtILEdBRWxCUixFQUFZYyxHQUFNLEdBQUdVLFVBQ3JCdkIsRUFBWUcsYUFLVCxDQUduQixDQUlBLE9BREFILEVBQVlDLFlBQVlTLEtBQUtILElBQ3RCLENBQUssRUFJdUNOLFlBM0RuQyxJQUNURCxFQUFZQyxZQTBENkNDLEtBdER2RCxJQUNGRixFQUFZRSxLQXFEbURzQixhQXJFckQsS0FDakIsTUFBTUMsRUFBZ0JDLE9BQU9DLEtBQUs1QixHQUFhaUIsT0FDL0MsT0FBSWhCLEVBQVlHLFlBQWNzQixDQUlsQixFQStEd0UsQyxTQ3JGNUY1QixFQUFPQyxRQWJQLFNBQStCOEIsRUFBS0MsR0FHaEMsT0FGQUQsRUFBTUUsS0FBS0MsS0FBS0gsR0FDaEJDLEVBQU1DLEtBQUtFLE1BQU1ILEdBQ1ZDLEtBQUtFLE1BQU1GLEtBQUtHLFVBQVlKLEVBQU1ELEVBQU0sR0FBS0EsRUFDeEQsQyxnQkNMQSxNQUFNTSxFQUF3QixFQUFRLElBd0d0Q3JDLEVBQU9DLFFBckdTbUIsSUFFWixJQUFJa0IsR0FBUyxFQUViLE1BQU1DLEVBQWMsR0FjZEMsRUFBYyxDQUFDOUIsRUFBUTZCLEVBQWFoQyxLQUV0QyxJQUFJa0MsR0FBUSxFQUVaLElBQUssSUFBSWpDLEVBQUksRUFBR0EsRUFBSStCLEVBQVlwQixPQUFRWCxJQUVwQyxHQUFJRSxFQUFPYyxhQUFlZSxFQUFZL0IsR0FBR2dCLFdBQ3JDLE9BQU9pQixFQUtmLElBQUssSUFBSWpDLEVBQUksRUFBR0EsRUFBSUQsRUFBTVksT0FBUVgsSUFFMUJFLEVBQU9jLGFBQWVqQixFQUFNQyxHQUFHZ0IsYUFDL0JpQixHQUFRLEdBSWhCLE9BQU9BLENBQUssRUErQlZDLEVBQW1CQyxJQUNyQixNQUFNQyxFQUFjRCxFQUFXeEIsT0FJL0IsT0FGcUJ3QixFQURITixFQUFzQixFQUFHTyxFQUFjLEdBR3RDLEVBeUJ2QixNQUFPLENBQUVDLE9BNUZNLElBQWVQLEVBNEZiUSxXQTFGRSxLQUVYUixHQURBQSxDQUtKLEVBb0Z5QlMsV0F6RFYsQ0FBQ3JDLEVBQVFpQyxFQUFZckIsSUFFaENnQixFQUVJRSxFQUFZOUIsRUFBUTZCLEVBQWFJLElBQ2pDSixFQUFZMUIsS0FBS0gsR0FFakJZLEVBQWNaLEdBRVAsa0JBQWtCQSxLQUlsQixzQkFVUixnQkFrQzhCc0MsaUJBckJmTCxJQUV0QixHQUFJTCxFQUFRLENBRVIsSUFBSVcsRUFBZVAsRUFBZ0JDLEdBRW5DLE1BQVFILEVBQVlTLEVBQWNWLEVBQWFJLElBRTNDTSxFQUFlUCxFQUFnQkMsR0FPbkMsT0FGQUosRUFBWTFCLEtBQUtvQyxHQUVWLGtCQUFrQkEsR0FDN0IsQ0FFQSxNQUFPLGVBQWUsRUFHaUM3QixPQUFNLEMsVUM1RXJFcEIsRUFBT0MsUUF4Qk0sQ0FBQ21CLEVBQU1ELEtBRWhCLElBQUlkLEVBQU8sRUFDUDZDLEdBQVcsRUFpQmYsTUFBTyxDQUFFaEMsVUFkUyxJQUFNQyxFQWNKZ0MsUUFmSixJQUFNOUMsRUFlT2dCLFFBYmIsSUFBTUQsRUFhZ0JLLElBWDFCLEtBQ1JwQixHQUFNLEVBVWlDcUIsT0FQNUIsS0FDTndCLEdBQVkvQixJQUFXZCxJQUN4QjZDLEdBQVcsR0FFUkEsR0FHdUMsQyxVQ3lCdERsRCxFQUFPQyxRQTFDa0JtRCxJQUdyQixNQUFNN0MsRUFBUThDLFNBQVNDLGNBQWMsT0FDckMvQyxFQUFNZ0QsVUFBVUMsSUFBSSxnQkFFcEIsSUFBSyxJQUFJL0MsRUFBSSxFQUFHQSxFQUFJMkMsRUFBVWpDLE9BQVFWLElBQUssQ0FFdkMsSUFBSWdELEVBQVFKLFNBQVNDLGNBQWMsT0FDbkNHLEVBQU1DLFlBQWMsR0FBR04sRUFBVTNDLEdBQUdlLGFBQ3BDakIsRUFBTW9ELFlBQVlGLEVBQ3RCLENBNEJBLE1BQU8sQ0FBRWxELFFBQU9xRCxpQkF4QlMsQ0FBQzFELEVBQWEyRCxLQUVuQyxJQUFLN0MsUUFBUWQsRUFBYSxDQUN0QixNQUFNcUIsRUFBZ0JyQixFQUFZYyxNQUFNLEdBR3hDLElBQUssSUFBSVIsRUFBSSxFQUFHQSxFQUFJZSxFQUFjSixPQUFRWCxJQUN0QyxJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSW9ELEVBQVUxQyxPQUFRVixJQUFLLENBRXZDLElBQUlxRCxFQUFnQkQsRUFBVXBELEdBQUdpRCxZQUFZSyxNQUFNLEtBQ25ERCxFQUFjRSxPQUFPLEVBQUcsRUFBR0MsT0FBT0gsRUFBYyxLQUc1Q3ZDLEVBQWNmLEdBQUdnQixhQUFlc0MsRUFBY3RDLFlBQzlDcUMsRUFBVXBELEdBQUc4QyxVQUFVQyxJQUFJLFlBR25DLENBRVIsR0FLOEIsQyxHQzFDbENVLEVBQTJCLENBQUMsRUFHaEMsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYXBFLFFBR3JCLElBQUlELEVBQVNrRSxFQUF5QkUsR0FBWSxDQUdqRG5FLFFBQVMsQ0FBQyxHQU9YLE9BSEFzRSxFQUFvQkgsR0FBVXBFLEVBQVFBLEVBQU9DLFFBQVNrRSxHQUcvQ25FLEVBQU9DLE9BQ2YsQyxNQ3RCQSxNQUFNZSxFQUFPLEVBQVEsS0FDZm9DLEVBQVksRUFBUSxLQUNwQm9CLEVBQVMsRUFBUSxLQUNqQkMsRUFBa0IsRUFBUSxLQU8xQkMsRUFBVUYsSUFHVkcsRUFBb0J2QixJQUdwQndCLEVBQWN2QixTQUFTQyxjQUFjLFFBQ3JDdUIsRUFBZUosRUFBZ0JFLEVBQWtCcEUsT0FFdkRxRSxFQUFZakIsWUFBWWtCLEVBQWF0RSxPQUNyQzhDLFNBQVN5QixLQUFLbkIsWUFBWWlCLEdBSTFCRCxFQUFrQjVELFVBQVVDLEVBQUssU0FBVSxHQUFJLENBQUMsQ0FBQyxJQUFLLEdBQUksQ0FBQyxJQUFLLEtBQ2hFMkQsRUFBa0I1RCxVQUFVQyxFQUFLLFlBQWEsR0FBSSxDQUFDLENBQUMsSUFBSyxHQUFJLENBQUMsSUFBSyxHQUFJLENBQUMsSUFBSyxLQUM3RTJELEVBQWtCNUQsVUFBVUMsRUFBSyxZQUFhLEdBQUksQ0FBQyxDQUFDLElBQUssR0FBSSxDQUFDLElBQUssR0FBSSxDQUFDLElBQUssS0FDN0UyRCxFQUFrQjVELFVBQVVDLEVBQUssYUFBYyxHQUFJLENBQUMsQ0FBQyxJQUFLLEdBQUksQ0FBQyxJQUFLLEdBQUksQ0FBQyxJQUFLLEdBQUksQ0FBQyxJQUFLLEtBQ3hGMkQsRUFBa0I1RCxVQUFVQyxFQUFLLFVBQVcsR0FBSSxDQUFDLENBQUMsSUFBSyxHQUFJLENBQUMsSUFBSyxHQUFJLENBQUMsSUFBSyxHQUFJLENBQUMsSUFBSyxHQUFJLENBQUMsSUFBSyxLQUUvRixNQUFNNkMsRUFBWVIsU0FBUzBCLGlCQUFpQixxQkFDNUNGLEVBQWFqQixpQkFBaUJlLEVBQWtCekUsWUFBYTJELEdBRzNDVyxJQUdSMUIsYUFHVixNQUFNa0MsRUFBZ0I1QixJQUVoQjZCLEVBQWtCUixFQUFnQk8sRUFBY3pFLE9BQ3REMEUsRUFBZ0IxRSxNQUFNMkUsVUFBWSxZQUNsQ04sRUFBWWpCLFlBQVlzQixFQUFnQjFFLE9BRXhDeUUsRUFBY2pFLFVBQVVDLEVBQUssU0FBVSxHQUFJLENBQUMsQ0FBQyxJQUFLLEdBQUksQ0FBQyxJQUFLLEtBQzVEZ0UsRUFBY2pFLFVBQVVDLEVBQUssWUFBYSxHQUFJLENBQUMsQ0FBQyxJQUFLLEdBQUksQ0FBQyxJQUFLLEdBQUksQ0FBQyxJQUFLLEtBQ3pFZ0UsRUFBY2pFLFVBQVVDLEVBQUssWUFBYSxHQUFJLENBQUMsQ0FBQyxJQUFLLEdBQUksQ0FBQyxJQUFLLEdBQUksQ0FBQyxJQUFLLEtBQ3pFZ0UsRUFBY2pFLFVBQVVDLEVBQUssYUFBYyxHQUFJLENBQUMsQ0FBQyxJQUFLLEdBQUksQ0FBQyxJQUFLLEdBQUksQ0FBQyxJQUFLLEdBQUksQ0FBQyxJQUFLLEtBQ3BGZ0UsRUFBY2pFLFVBQVVDLEVBQUssVUFBVyxHQUFJLENBQUMsQ0FBQyxJQUFLLEdBQUksQ0FBQyxJQUFLLEdBQUksQ0FBQyxJQUFLLEdBQUksQ0FBQyxJQUFLLEdBQUksQ0FBQyxJQUFLLE1BRTNGLE1BQU1tRSxFQUFZOUIsU0FBUzBCLGlCQUFpQixrQkFDNUNFLEVBQWdCckIsaUJBQWlCb0IsRUFBYzlFLFlBQWFpRixHQVM1REEsRUFBVUMsU0FBUUMsSUFDZEEsRUFBSUMsaUJBQWlCLFNBQVVDLElBQzNCQyxRQUFRQyxJQUFJRixFQUFFRyxjQUFjaEMsYUFHNUIsSUFDSWhELEVBRFk2RSxFQUFFRyxjQUFjaEMsWUFDVEssTUFBTSxLQUM3QnJELEVBQU9zRCxPQUFPLEVBQUcsRUFBR0MsT0FBT3ZELEVBQU8sS0FFbEM4RSxRQUFRQyxJQUFJL0UsR0FDWmdFLEVBQVEzQixXQUFXckMsRUFBUXNFLEVBQWN6RSxNQUFPeUUsRUFBYzFELGVBRTlEa0UsUUFBUUMsSUFBSVQsRUFBYzVFLGVBQzFCb0YsUUFBUUMsSUFBSVQsRUFBYzNFLE9BQU8sR0FDcEMsRyIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZUJvYXJkLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaGVscGVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvcGxheWVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvc2hpcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3VpLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9nYW1lTG9vcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLy8gZ2FtZWJvYXJkIGZhY3RvcnlcclxuXHJcbmNvbnN0IGdhbWVCb2FyZCA9ICgpID0+IHtcclxuXHJcbiAgICBjb25zdCBwbGF5ZXJTaGlwcyA9IHt9O1xyXG5cclxuICAgIGNvbnN0IGJvYXJkU3RhdHVzID0ge1xyXG4gICAgICAgIG1pc3NlZFNob3RzOiBbXSxcclxuICAgICAgICBoaXRzOiBbXSxcclxuICAgICAgICBzaGlwc1N1bms6IDAsXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGNyZWF0ZSBncmlkXHJcbiAgICBjb25zdCBjcmVhdGVCb2FyZCA9ICgpID0+IHtcclxuXHJcbiAgICAgICAgY29uc3QgYm9hcmQgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDY1OyBpIDw9IDc0OyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPD0gMTA7IGorKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvb3JkcyA9IFtTdHJpbmcuZnJvbUNoYXJDb2RlKGkpLCBqXTtcclxuICAgICAgICAgICAgICAgIGJvYXJkLnB1c2goY29vcmRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYm9hcmQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYm9hcmQgPSBjcmVhdGVCb2FyZCgpO1xyXG5cclxuICAgIC8vIGNoZWNrIGlmIGFsbCBzaGlwcyBoYXZlIGJlZW4gc3Vua1xyXG4gICAgY29uc3QgYWxsU2hpcHNTdW5rID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG51bWJlck9mU2hpcHMgPSBPYmplY3Qua2V5cyhwbGF5ZXJTaGlwcykubGVuZ3RoO1xyXG4gICAgICAgIGlmIChib2FyZFN0YXR1cy5zaGlwc1N1bmsgPT09IG51bWJlck9mU2hpcHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZ2V0IG1pc3NlZCBzaG90c1xyXG4gICAgY29uc3QgbWlzc2VkU2hvdHMgPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJvYXJkU3RhdHVzLm1pc3NlZFNob3RzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGdldCBoaXRzXHJcbiAgICBjb25zdCBoaXRzID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBib2FyZFN0YXR1cy5oaXRzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHBsYWNlc2hpcCBtZXRob2RcclxuICAgIGNvbnN0IHBsYWNlU2hpcCA9IChzaGlwLCBwbGFjZW1lbnQpID0+IHtcclxuICAgICAgICAvLyBjaGVjayB0aGF0IHNoaXAgbGVuZ3RoID09IGNvb3JkcyBsZW5ndGhcclxuICAgICAgICBpZiAoc2hpcC5nZXRMZW5ndGgoKSAhPT0gcGxhY2VtZW50Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2luY29ycmVjdCBwbGFjZW1lbnQnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY2hlY2sgdGhhdCBjb29yZHMgYXJlIHZhbGlkKGFkamFjZW50IGFuZCBub3Qgb2NjdXBpZWQpXHJcblxyXG4gICAgICAgIC8vIGFkZCBzaGlwIHRvIHBsYXllciBzaGlwc1xyXG4gICAgICAgIGNvbnN0IG5hbWUgPSBzaGlwLmdldE5hbWUoKTtcclxuICAgICAgICBwbGF5ZXJTaGlwc1tuYW1lXSA9IFtdO1xyXG4gICAgICAgIHBsYXllclNoaXBzW25hbWVdWzBdID0gc2hpcDtcclxuICAgICAgICBwbGF5ZXJTaGlwc1tuYW1lXVsxXSA9IFsuLi5wbGFjZW1lbnRdO1xyXG5cclxuICAgICAgICByZXR1cm4gcGxheWVyU2hpcHM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmVjZWl2ZSBhdHRhY2sgbWV0aG9kXHJcbiAgICBjb25zdCByZWNlaXZlQXR0YWNrID0gKGNvb3JkcykgPT4ge1xyXG4gICAgICAgIC8vIGNoZWNrIGlmIGNvb3JkcyBhcmUgdmFsaWQgICA/XHJcbiAgICAgICAgLy8gY2hlY2sgYm9hcmQgYW5kIG1pc3NlZCBzaG90c1xyXG4gICAgICAgIC8vIHNlYXJjaCBwbGF5ZXIgcGxhY2VtZW50cyBmb3IgY29vcmRzXHJcbiAgICAgICAgZm9yIChjb25zdCBzaGlwIGluIHBsYXllclNoaXBzKSB7XHJcbiAgICAgICAgICAgIGxldCBwbGFjZW1lbnRzQXJyID0gcGxheWVyU2hpcHNbc2hpcF1bMV07XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGxhY2VtZW50c0Fyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgKGZvdW5kKSByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgaWYgKGNvb3Jkcy50b1N0cmluZygpID09PSBwbGFjZW1lbnRzQXJyW2ldLnRvU3RyaW5nKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgaGl0IHRvIHNoaXBcclxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXJTaGlwc1tzaGlwXVswXS5oaXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdG8gcmVjb3JkZWQgc2hvdHM7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9hcmRTdGF0dXMuaGl0cy5wdXNoKGNvb3Jkcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgc2hpcCBpcyBzdW5rXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllclNoaXBzW3NoaXBdWzBdLmlzU3VuaygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvYXJkU3RhdHVzLnNoaXBzU3VuaysrO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIGFsbCBzaGlwcyBoYXZlIGJlZW4gc3VuayAqXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBpZiAoIWZvdW5kKSBhZGQgdG8gbWlzc2VkIHNob3RzIGFuZCByZXR1cm4gZmFsc2VcclxuICAgICAgICBib2FyZFN0YXR1cy5taXNzZWRTaG90cy5wdXNoKGNvb3Jkcyk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZXR1cm4geyBib2FyZCwgcGxhY2VTaGlwLCBwbGF5ZXJTaGlwcywgcmVjZWl2ZUF0dGFjaywgbWlzc2VkU2hvdHMsIGhpdHMsIGFsbFNoaXBzU3VuayB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGdhbWVCb2FyZDsiLCIvLyBnZXQgcmFuZG9tIG51bSBpbmNsdXNpdmUgbWluIGFuZCBtYXhcclxuZnVuY3Rpb24gZ2V0UmFuZG9tSW50SW5jbHVzaXZlKG1pbiwgbWF4KSB7XHJcbiAgICBtaW4gPSBNYXRoLmNlaWwobWluKTtcclxuICAgIG1heCA9IE1hdGguZmxvb3IobWF4KTtcclxuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkgKyBtaW4pO1xyXG59XHJcblxyXG4vLyBmdW5jdGlvbiBjb21wYXJlQXJyYXlzKGFycjEsIGFycjIpIHtcclxuLy8gICAgIGlmIChhcnIxLnRvU3RyaW5nKCkgPT09IGFycjIudG9TdHJpbmcoKSkge1xyXG4vLyAgICAgICAgIHJldHVybiB0cnVlO1xyXG4vLyAgICAgfVxyXG4vLyAgICAgcmV0dXJuIGZhbHNlXHJcbi8vIH1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZ2V0UmFuZG9tSW50SW5jbHVzaXZlO1xyXG4iLCJjb25zdCBnZXRSYW5kb21JbnRJbmNsdXNpdmUgPSByZXF1aXJlKFwiLi4vc3JjL2hlbHBlclwiKVxyXG5cclxuLy8gY3JlYXRlIGEgcGxheWVyXHJcbmNvbnN0IHBsYXllciA9IChuYW1lKSA9PiB7XHJcblxyXG4gICAgbGV0IG15VHVybiA9IHRydWU7XHJcblxyXG4gICAgY29uc3QgYXR0YWNrc01hZGUgPSBbXTtcclxuXHJcbiAgICBjb25zdCBpc1R1cm4gPSAoKSA9PiB7IHJldHVybiBteVR1cm4gfTtcclxuXHJcbiAgICBjb25zdCBjaGFuZ2VUdXJuID0gKCkgPT4ge1xyXG4gICAgICAgIGlmIChteVR1cm4pIHtcclxuICAgICAgICAgICAgbXlUdXJuID0gZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG15VHVybiA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBjaGVjayBpZiBhIG1vdmUgaXMgdmFsaWRcclxuICAgIGNvbnN0IGlzdmFsaWRNb3ZlID0gKGNvb3JkcywgYXR0YWNrc01hZGUsIGJvYXJkKSA9PiB7XHJcblxyXG4gICAgICAgIGxldCB2YWxpZCA9IGZhbHNlXHJcbiAgICAgICAgLy8gY2hlY2sgY29vcmRzIGFuZCBhcnJheSBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF0dGFja3NNYWRlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbXBhcmUgYm9hcmRbaV0gd2l0aCBjb29yZHNcclxuICAgICAgICAgICAgaWYgKGNvb3Jkcy50b1N0cmluZygpID09PSBhdHRhY2tzTWFkZVtpXS50b1N0cmluZygpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNoZWNrIGNvb3JkcyBpbiBib2FyZFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9hcmQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgLy8gY29tcGFyZSBib2FyZFtpXSB3aXRoIGNvb3Jkc1xyXG4gICAgICAgICAgICBpZiAoY29vcmRzLnRvU3RyaW5nKCkgPT09IGJvYXJkW2ldLnRvU3RyaW5nKCkpIHtcclxuICAgICAgICAgICAgICAgIHZhbGlkID0gdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdmFsaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZW50ZXIgY29vcmRpbmF0ZXMgdG8gYXR0YWNrIG9uIGVuZW15IGJvYXJkXHJcbiAgICBjb25zdCBtYWtlQXR0YWNrID0gKGNvb3JkcywgZW5lbXlCb2FyZCwgcmVjZWl2ZUF0dGFjaykgPT4ge1xyXG4gICAgICAgIC8vIGNoZWNrIGNvcnJlY3QgdHVyblxyXG4gICAgICAgIGlmIChteVR1cm4pIHtcclxuICAgICAgICAgICAgLy8gc2VlIGlmIGNvb3JkcyBhcmUgdmFsaWRcclxuICAgICAgICAgICAgaWYgKGlzdmFsaWRNb3ZlKGNvb3JkcywgYXR0YWNrc01hZGUsIGVuZW15Qm9hcmQpKSB7XHJcbiAgICAgICAgICAgICAgICBhdHRhY2tzTWFkZS5wdXNoKGNvb3Jkcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZUF0dGFjayhjb29yZHMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBgYXR0YWNrIG1hZGUgYXQgJHtjb29yZHN9YDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2ludmFsaWQgY29vcmRpbmF0ZXMnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGNhbGwgcmVjZWl2ZSBhdHRhY2sgb24gb3RoZXIgYm9hcmRcclxuICAgICAgICAgICAgLy8gZW5lbXlCb2FyZC5yZWNlaXZlQXR0YWNrKGNvb3Jkcyk7ID9cclxuXHJcblxyXG4gICAgICAgICAgICAvLyBjaGFuZ2UgdHVybiBhbmQgcmV0dXJuKlxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAnbm90IHlvdXIgdHVybic7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZ2V0IHJhbmRvbSBjb29yZHMgZ2l2ZW4gYSBib2FyZFxyXG4gICAgY29uc3QgZ2V0UmFuZG9tQ29vcmRzID0gKGVuZW15Qm9hcmQpID0+IHtcclxuICAgICAgICBjb25zdCBib2FyZExlbmd0aCA9IGVuZW15Qm9hcmQubGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IHJhbmRvbU51bSA9IGdldFJhbmRvbUludEluY2x1c2l2ZSgwLCBib2FyZExlbmd0aCAtIDEpO1xyXG4gICAgICAgIGNvbnN0IHJhbmRvbUNvb3JkcyA9IGVuZW15Qm9hcmRbcmFuZG9tTnVtXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJhbmRvbUNvb3JkcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBtYWtlIGEgdmFsaWQgcmFuZG9tIGF0dGFja1xyXG4gICAgY29uc3QgbWFrZVJhbmRvbUF0dGFjayA9IChlbmVteUJvYXJkKSA9PiB7XHJcblxyXG4gICAgICAgIGlmIChteVR1cm4pIHtcclxuICAgICAgICAgICAgLy8gZ2V0IHJhbmRvbSBjb29yZHNcclxuICAgICAgICAgICAgbGV0IHJhbmRvbUNvb3JkcyA9IGdldFJhbmRvbUNvb3JkcyhlbmVteUJvYXJkKTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICghaXN2YWxpZE1vdmUocmFuZG9tQ29vcmRzLCBhdHRhY2tzTWFkZSwgZW5lbXlCb2FyZCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGdldCBuZXcgY29vcmRzIHdoaWxlIGludmFsaWRcclxuICAgICAgICAgICAgICAgIHJhbmRvbUNvb3JkcyA9IGdldFJhbmRvbUNvb3JkcyhlbmVteUJvYXJkKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gbWFrZSBhdHRhY2tcclxuICAgICAgICAgICAgLy8gZW5lbXlCb2FyZC5yZWNlaXZlQXR0YWNrKHJhbmRvbUNvb3Jkcyk7XHJcbiAgICAgICAgICAgIGF0dGFja3NNYWRlLnB1c2gocmFuZG9tQ29vcmRzKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBgYXR0YWNrIG1hZGUgYXQgJHtyYW5kb21Db29yZHN9YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAnbm90IHlvdXIgdHVybic7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgaXNUdXJuLCBjaGFuZ2VUdXJuLCBtYWtlQXR0YWNrLCBtYWtlUmFuZG9tQXR0YWNrLCBuYW1lIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcGxheWVyOyIsIi8vIHNoaXAgZmFjdG9yeSBmdW5jdGlvblxyXG5jb25zdCBzaGlwID0gKG5hbWUsIGxlbmd0aCkgPT4ge1xyXG5cclxuICAgIGxldCBoaXRzID0gMDtcclxuICAgIGxldCBiZWVuU3VuayA9IGZhbHNlO1xyXG5cclxuICAgIGNvbnN0IGdldEhpdHMgPSAoKSA9PiBoaXRzO1xyXG4gICAgY29uc3QgZ2V0TGVuZ3RoID0gKCkgPT4gbGVuZ3RoO1xyXG4gICAgY29uc3QgZ2V0TmFtZSA9ICgpID0+IG5hbWU7XHJcblxyXG4gICAgY29uc3QgaGl0ID0gKCkgPT4ge1xyXG4gICAgICAgIGhpdHMrKztcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpc1N1bmsgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFiZWVuU3VuayAmJiBsZW5ndGggPT09IGhpdHMpIHtcclxuICAgICAgICAgICAgYmVlblN1bmsgPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBiZWVuU3VuaztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBnZXRMZW5ndGgsIGdldEhpdHMsIGdldE5hbWUsIGhpdCwgaXNTdW5rIH1cclxuXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gc2hpcDsiLCIvLyBkb20gbW9kdWxlXHJcbi8vIDEuIGRpc3BsYXkgYm90aCBwbGF5ZXJzIGJvYXJkcyByZW5kZXIgdGhlbSB1c2luZyBpbmZvIGZyb20gZ2FtZWJvYXJkIGNsYXNzL2ZhY3RvcnlcclxuLy8gMi4gbGV0IHVzZXIgY2xpY2sgb24gY29vcmQgaW4gZW5lbXkgYm9hcmRcclxuXHJcbmNvbnN0IHJlbmRlckdhbWVCb2FyZCA9IChnYW1lQm9hcmQpID0+IHtcclxuXHJcbiAgICAvLyByZW5kZXIgYm9hcmRcclxuICAgIGNvbnN0IGJvYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGJvYXJkLmNsYXNzTGlzdC5hZGQoXCJwbGF5ZXItYm9hcmRcIik7XHJcblxyXG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBnYW1lQm9hcmQubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAvLyBjcmVhdGUgYmxvY2tcclxuICAgICAgICBsZXQgY29vcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGNvb3JkLnRleHRDb250ZW50ID0gYCR7Z2FtZUJvYXJkW2pdLnRvU3RyaW5nKCl9YDtcclxuICAgICAgICBib2FyZC5hcHBlbmRDaGlsZChjb29yZCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIHJlbmRlciBwbGFjZW1lbnQgb2Ygc2hpcHMgKiBcclxuICAgIGNvbnN0IHJlbmRlclBsYWNlbWVudHMgPSAocGxheWVyU2hpcHMsIGNvb3Jkc0FycikgPT4ge1xyXG4gICAgICAgIC8vIGNoYW5nZSBiYWNrZ3JvdW5kQ29sb3Igb2YgY29vcmRzXHJcbiAgICAgICAgZm9yIChzaGlwIGluIHBsYXllclNoaXBzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsYWNlbWVudHNBcnIgPSBwbGF5ZXJTaGlwc1tzaGlwXVsxXTtcclxuXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHBsYWNlbWVudHNBcnIpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBsYWNlbWVudHNBcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY29vcmRzQXJyLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29tcGFyZSBwbGFjZW1lbnRbaV0gd2l0aCBjb29yZHNbal1cclxuICAgICAgICAgICAgICAgICAgICBsZXQgZGlzcGxheUNvb3JkcyA9IGNvb3Jkc0FycltqXS50ZXh0Q29udGVudC5zcGxpdChcIixcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheUNvb3Jkcy5zcGxpY2UoMSwgMSwgTnVtYmVyKGRpc3BsYXlDb29yZHNbMV0pKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkaXNwbGF5Q29vcmRzKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwbGFjZW1lbnRzQXJyW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGxhY2VtZW50c0FycltpXS50b1N0cmluZygpID09PSBkaXNwbGF5Q29vcmRzLnRvU3RyaW5nKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29vcmRzQXJyW2pdLmNsYXNzTGlzdC5hZGQoXCJwbGFjZW1lbnRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyByZW5kZXIgYXR0YWNrc1xyXG5cclxuICAgIHJldHVybiB7IGJvYXJkLCByZW5kZXJQbGFjZW1lbnRzIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcmVuZGVyR2FtZUJvYXJkOyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJjb25zdCBzaGlwID0gcmVxdWlyZShcIi4vc2hpcFwiKTtcclxuY29uc3QgZ2FtZUJvYXJkID0gcmVxdWlyZShcIi4vZ2FtZUJvYXJkXCIpO1xyXG5jb25zdCBwbGF5ZXIgPSByZXF1aXJlKFwiLi9wbGF5ZXJcIik7XHJcbmNvbnN0IHJlbmRlckdhbWVCb2FyZCA9IHJlcXVpcmUoXCIuL3VpXCIpO1xyXG5cclxuLy8gbWFpbiBnYW1lbG9vcFxyXG4vLyAxLiBzZXR1cCBwbGF5ZXJzIGFuZCBnYW1lYm9hcmRzIHdpdGggcHJlZGV0ZXJtaW5lZCBjb29yZHNcclxuLy8gMi4gc3RlcHMgdGhyb3VnaCBnYW1lIHR1cm4gYnkgdHVybiB1c2luZyBvbmx5IG1ldGhvZHMgZnJvbSBvdGhlciBvYmplY3RzXHJcblxyXG4vLyBjcmVhdGUgcGxheWVyIFxyXG5jb25zdCBwbGF5ZXIxID0gcGxheWVyKCk7XHJcblxyXG4vLyBjcmVhdGUgZ2FtZWJvYXJkXHJcbmNvbnN0IHBsYXllcjFfZ2FtZUJvYXJkID0gZ2FtZUJvYXJkKCk7XHJcblxyXG4vLyByZW5kZXIgZ2FtZWJvYXJkXHJcbmNvbnN0IG1haW5Db250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm1haW5cIik7XHJcbmNvbnN0IGRpc3BsYXlCb2FyZCA9IHJlbmRlckdhbWVCb2FyZChwbGF5ZXIxX2dhbWVCb2FyZC5ib2FyZCk7XHJcblxyXG5tYWluQ29udGVudC5hcHBlbmRDaGlsZChkaXNwbGF5Qm9hcmQuYm9hcmQpO1xyXG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1haW5Db250ZW50KTtcclxuXHJcbi8vIHBsYWNlc2hpcFxyXG5cclxucGxheWVyMV9nYW1lQm9hcmQucGxhY2VTaGlwKHNoaXAoXCJwYXRyb2xcIiwgMiksIFtbXCJCXCIsIDNdLCBbXCJCXCIsIDRdXSk7XHJcbnBsYXllcjFfZ2FtZUJvYXJkLnBsYWNlU2hpcChzaGlwKFwic3VibWFyaW5lXCIsIDMpLCBbW1wiRVwiLCA4XSwgW1wiRlwiLCA4XSwgW1wiR1wiLCA4XV0pXHJcbnBsYXllcjFfZ2FtZUJvYXJkLnBsYWNlU2hpcChzaGlwKFwiZGVzdHJveWVyXCIsIDMpLCBbW1wiQ1wiLCA2XSwgW1wiQ1wiLCA3XSwgW1wiQ1wiLCA4XV0pO1xyXG5wbGF5ZXIxX2dhbWVCb2FyZC5wbGFjZVNoaXAoc2hpcChcImJhdHRsZXNoaXBcIiwgNCksIFtbXCJDXCIsIDJdLCBbXCJEXCIsIDJdLCBbXCJFXCIsIDJdLCBbXCJGXCIsIDJdXSk7XHJcbnBsYXllcjFfZ2FtZUJvYXJkLnBsYWNlU2hpcChzaGlwKFwiY2FycmllclwiLCA1KSwgW1tcIklcIiwgNV0sIFtcIklcIiwgNl0sIFtcIklcIiwgN10sIFtcIklcIiwgOF0sIFtcIklcIiwgOV1dKTtcclxuXHJcbmNvbnN0IGNvb3Jkc0FyciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucGxheWVyLWJvYXJkIGRpdlwiKTtcclxuZGlzcGxheUJvYXJkLnJlbmRlclBsYWNlbWVudHMocGxheWVyMV9nYW1lQm9hcmQucGxheWVyU2hpcHMsIGNvb3Jkc0Fycik7XHJcblxyXG4vLyBjcmVhdGUgY3B1IHBsYXllclxyXG5jb25zdCBwbGF5ZXJDcHUgPSBwbGF5ZXIoKTtcclxuXHJcbi8vIGNoYW5nZSBjcHUgcGxheWVyIHR1cm5cclxucGxheWVyQ3B1LmNoYW5nZVR1cm4oKTtcclxuXHJcbi8vIGNwdSBib2FyZFxyXG5jb25zdCBjcHVfZ2FtZUJvYXJkID0gZ2FtZUJvYXJkKCk7XHJcblxyXG5jb25zdCBkaXNwbGF5Q3B1Qm9hcmQgPSByZW5kZXJHYW1lQm9hcmQoY3B1X2dhbWVCb2FyZC5ib2FyZCk7XHJcbmRpc3BsYXlDcHVCb2FyZC5ib2FyZC5jbGFzc05hbWUgPSBcImNwdS1ib2FyZFwiO1xyXG5tYWluQ29udGVudC5hcHBlbmRDaGlsZChkaXNwbGF5Q3B1Qm9hcmQuYm9hcmQpO1xyXG5cclxuY3B1X2dhbWVCb2FyZC5wbGFjZVNoaXAoc2hpcChcInBhdHJvbFwiLCAyKSwgW1tcIkZcIiwgOV0sIFtcIkdcIiwgOV1dKTtcclxuY3B1X2dhbWVCb2FyZC5wbGFjZVNoaXAoc2hpcChcInN1Ym1hcmluZVwiLCAzKSwgW1tcIkFcIiwgNV0sIFtcIkFcIiwgNl0sIFtcIkFcIiwgN11dKVxyXG5jcHVfZ2FtZUJvYXJkLnBsYWNlU2hpcChzaGlwKFwiZGVzdHJveWVyXCIsIDMpLCBbW1wiRFwiLCA1XSwgW1wiRVwiLCA1XSwgW1wiRlwiLCA1XV0pO1xyXG5jcHVfZ2FtZUJvYXJkLnBsYWNlU2hpcChzaGlwKFwiYmF0dGxlc2hpcFwiLCA0KSwgW1tcIkhcIiwgMV0sIFtcIkhcIiwgMl0sIFtcIkhcIiwgM10sIFtcIkhcIiwgNF1dKTtcclxuY3B1X2dhbWVCb2FyZC5wbGFjZVNoaXAoc2hpcChcImNhcnJpZXJcIiwgNSksIFtbXCJKXCIsIDZdLCBbXCJKXCIsIDddLCBbXCJKXCIsIDhdLCBbXCJKXCIsIDldLCBbXCJKXCIsIDEwXV0pO1xyXG5cclxuY29uc3QgY3B1Q29vcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jcHUtYm9hcmQgZGl2XCIpO1xyXG5kaXNwbGF5Q3B1Qm9hcmQucmVuZGVyUGxhY2VtZW50cyhjcHVfZ2FtZUJvYXJkLnBsYXllclNoaXBzLCBjcHVDb29yZHMpO1xyXG5cclxuLy8gbWFuYWdlIHR1cm5cclxuXHJcblxyXG4vLyBwbGF5ZXIgd2l0aCBjdXJyZW50IHR1cm4gbWFrZXMgYXR0YWNrXHJcblxyXG5cclxuLy8gYWRkIGV2ZW50bGlzdGVuZXIgaWYgcGxheWVyIDEgdHVyblxyXG5jcHVDb29yZHMuZm9yRWFjaChkaXYgPT4ge1xyXG4gICAgZGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlLmN1cnJlbnRUYXJnZXQudGV4dENvbnRlbnQpO1xyXG4gICAgICAgIC8vIHJ1biBtYWtlIGF0dGFjayBhbmQgcmVjZWl2ZSBhdHRhY2tcclxuICAgICAgICAvLyBnZXQgYXR0YWNrIGNvb3Jkc1xyXG4gICAgICAgIGxldCBnZXRDb29yZHMgPSBlLmN1cnJlbnRUYXJnZXQudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgbGV0IGNvb3JkcyA9IGdldENvb3Jkcy5zcGxpdCgnLCcpO1xyXG4gICAgICAgIGNvb3Jkcy5zcGxpY2UoMSwgMSwgTnVtYmVyKGNvb3Jkc1sxXSkpO1xyXG4gICAgICAgIC8vIHJ1biBtYWtlIGF0dGFjayBmdW5jdGlvblxyXG4gICAgICAgIGNvbnNvbGUubG9nKGNvb3Jkcyk7XHJcbiAgICAgICAgcGxheWVyMS5tYWtlQXR0YWNrKGNvb3JkcywgY3B1X2dhbWVCb2FyZC5ib2FyZCwgY3B1X2dhbWVCb2FyZC5yZWNlaXZlQXR0YWNrKTtcclxuICAgICAgICAvLyBjcHVfZ2FtZUJvYXJkLnJlY2VpdmVBdHRhY2soY29vcmRzKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhjcHVfZ2FtZUJvYXJkLm1pc3NlZFNob3RzKCkpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGNwdV9nYW1lQm9hcmQuaGl0cygpKTtcclxuICAgIH0pXHJcbn0pXHJcblxyXG4vLyBwbGF5ZXIxLm1ha2VSYW5kb21BdHRhY2soY3B1X2dhbWVCb2FyZC5ib2FyZCk7XHJcblxyXG5cclxuLy8gcmVjZWl2ZSBhdHRhY2sgb24gZW5lbXkgYm9hcmRcclxuXHJcblxyXG4vLyByZXBvcnQgbWlzcywgaGl0LCBzaGlwc3Vua1xyXG5cclxuXHJcbi8vIHVwZGF0ZSB1aVxyXG5cclxuXHJcbi8vIGNoZWNrIGlmIGdhbWVvdmVyXHJcblxyXG5cclxuLy8gY2hhbmdlIHR1cm5cclxuXHJcbiJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwicGxheWVyU2hpcHMiLCJib2FyZFN0YXR1cyIsIm1pc3NlZFNob3RzIiwiaGl0cyIsInNoaXBzU3VuayIsImJvYXJkIiwiaSIsImoiLCJjb29yZHMiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJwdXNoIiwiY3JlYXRlQm9hcmQiLCJwbGFjZVNoaXAiLCJzaGlwIiwicGxhY2VtZW50IiwiZ2V0TGVuZ3RoIiwibGVuZ3RoIiwibmFtZSIsImdldE5hbWUiLCJyZWNlaXZlQXR0YWNrIiwicGxhY2VtZW50c0FyciIsInRvU3RyaW5nIiwiaGl0IiwiaXNTdW5rIiwiYWxsU2hpcHNTdW5rIiwibnVtYmVyT2ZTaGlwcyIsIk9iamVjdCIsImtleXMiLCJtaW4iLCJtYXgiLCJNYXRoIiwiY2VpbCIsImZsb29yIiwicmFuZG9tIiwiZ2V0UmFuZG9tSW50SW5jbHVzaXZlIiwibXlUdXJuIiwiYXR0YWNrc01hZGUiLCJpc3ZhbGlkTW92ZSIsInZhbGlkIiwiZ2V0UmFuZG9tQ29vcmRzIiwiZW5lbXlCb2FyZCIsImJvYXJkTGVuZ3RoIiwiaXNUdXJuIiwiY2hhbmdlVHVybiIsIm1ha2VBdHRhY2siLCJtYWtlUmFuZG9tQXR0YWNrIiwicmFuZG9tQ29vcmRzIiwiYmVlblN1bmsiLCJnZXRIaXRzIiwiZ2FtZUJvYXJkIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiY29vcmQiLCJ0ZXh0Q29udGVudCIsImFwcGVuZENoaWxkIiwicmVuZGVyUGxhY2VtZW50cyIsImNvb3Jkc0FyciIsImRpc3BsYXlDb29yZHMiLCJzcGxpdCIsInNwbGljZSIsIk51bWJlciIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJwbGF5ZXIiLCJyZW5kZXJHYW1lQm9hcmQiLCJwbGF5ZXIxIiwicGxheWVyMV9nYW1lQm9hcmQiLCJtYWluQ29udGVudCIsImRpc3BsYXlCb2FyZCIsImJvZHkiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY3B1X2dhbWVCb2FyZCIsImRpc3BsYXlDcHVCb2FyZCIsImNsYXNzTmFtZSIsImNwdUNvb3JkcyIsImZvckVhY2giLCJkaXYiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImNvbnNvbGUiLCJsb2ciLCJjdXJyZW50VGFyZ2V0Il0sInNvdXJjZVJvb3QiOiIifQ==